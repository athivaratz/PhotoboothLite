<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PhotoBooth Gallery - Lite Version</title>
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>üì∏</text></svg>">
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.8.1/socket.io.js" onerror="this.onerror=null;this.src='/socket.io/socket.io.js'"></script>
    <script>
        // Debug console logging
        console.log('üöÄ PhotoBooth UI Loading...');
        
        // Check if required libraries are loaded
        window.addEventListener('load', function() {
            console.log('üìÑ Page loaded');
            console.log('üîå Socket.IO loaded:', typeof io !== 'undefined');
            
            // Basic error handling
            window.onerror = function(msg, url, line, col, error) {
                console.error('‚ùå JavaScript Error:', {
                    message: msg,
                    source: url,
                    line: line,
                    column: col,
                    error: error
                });
                return false;
            };
        });
    </script>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üì∏ PhotoBooth Gallery - Lite</h1>
            <div class="status-bar">
                <div class="status-item">
                    <div class="status-dot" id="status-dot"></div>
                    <span id="status-text">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö...</span>
                </div>
                <div class="status-item">
                    <span>üìÅ <span id="current-path">-</span></span>
                </div>
                <div class="status-item">
                    <span>üì∑ <span id="photo-count">0</span> ‡∏£‡∏π‡∏õ</span>
                </div>
                <div class="controls">
                    <button class="btn" id="btn-scan">üîÑ ‡∏™‡πÅ‡∏Å‡∏ô‡πÉ‡∏´‡∏°‡πà</button>
                    <button class="btn" id="btn-toggle-watch">‚èØÔ∏è ‡πÄ‡∏õ‡∏¥‡∏î/‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡∏î‡∏π</button>
                    <button class="btn success" id="btn-export">üì¶ ‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î ZIP</button>
                </div>
            </div>
        </div>

        <div class="tabs">
            <button class="tab active" data-tab="gallery">üñºÔ∏è ‡πÅ‡∏Å‡∏•‡πÄ‡∏•‡∏≠‡∏£‡∏µ‡πà</button>
            <button class="tab" data-tab="creator">üé® ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡πÇ‡∏ï‡πâ‡∏ö‡∏π‡∏ó</button>
            <button class="tab" data-tab="frames">üñºÔ∏è ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏ü‡∏£‡∏°</button>
            <button class="tab" data-tab="admin">‚öôÔ∏è ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£</button>
        </div>

        <div class="tab-content">
            <!-- Gallery Tab -->
            <div class="tab-panel active" id="gallery-panel">
                <div id="gallery-container" class="gallery">
                    <div class="loading">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û...</div>
                </div>
                <div id="gallery-pagination" class="gallery-pagination"></div>
            </div>

            <!-- PhotoBooth Creator Tab -->
            <div class="tab-panel" id="creator-panel">
                <div class="admin-section">
                    <h3>üé® PhotoBooth Creator</h3>
                    <div class="creator-info">
                        <p>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡∏à‡∏≤‡∏Å‡πÅ‡∏Å‡∏•‡πÄ‡∏•‡∏≠‡∏£‡∏µ‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏≥‡∏°‡∏≤‡πÉ‡∏™‡πà‡πÄ‡∏ü‡∏£‡∏°‡πÇ‡∏ü‡πÇ‡∏ï‡πâ‡∏ö‡∏π‡∏ó</p>
                    </div>

                    <div class="creator-controls">
                        <div class="frame-selection">
                            <label>üñºÔ∏è ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ü‡∏£‡∏°:</label>
                            <select id="creator-frame-select" class="form-control">
                                <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ü‡∏£‡∏° --</option>
                            </select>
                        </div>
                        
                        <div class="creator-actions">
                            <button class="btn success" id="btn-load-creator">üéØ ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏ü‡∏£‡∏°</button>
                            <button class="btn" id="btn-auto-fill">üîÑ ‡πÉ‡∏™‡πà‡∏£‡∏π‡∏õ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥</button>
                            <button class="btn" id="btn-clear-slots">üóëÔ∏è ‡∏•‡πâ‡∏≤‡∏á Slots</button>
                            <button class="btn success" id="btn-generate-photobooth">üé® ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡πÇ‡∏ï‡πâ‡∏ö‡∏π‡∏ó</button>
                        </div>
                    </div>
                </div>

                <div class="creator-workspace">
                    <div class="slots-assignment" id="slots-assignment">
                        <h4>üéØ ‡∏à‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏£‡∏π‡∏õ‡πÉ‡∏ô Slots:</h4>
                        <div class="assignment-placeholder">
                            <p>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ü‡∏£‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏£‡∏π‡∏õ</p>
                        </div>
                    </div>

                    <div class="photo-selector" id="photo-selector">
                        <h4>üì∑ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡∏à‡∏≤‡∏Å‡πÅ‡∏Å‡∏•‡πÄ‡∏•‡∏≠‡∏£‡∏µ‡πà:</h4>
                        <div class="selector-photos" id="selector-photos">
                            <div class="loading">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ...</div>
                        </div>
                    </div>
                </div>

                <div class="preview-section">
                    <h4>üëÅÔ∏è ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå:</h4>
                    <div class="photobooth-preview" id="photobooth-preview">
                        <div class="preview-placeholder">
                            <div class="preview-icon">üñºÔ∏è</div>
                            <p>‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏ü‡πÇ‡∏ï‡πâ‡∏ö‡∏π‡∏ó</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Frame Management Tab -->
            <div class="tab-panel" id="frames-panel">
                <div class="admin-section">
                    <h3>üñºÔ∏è ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ü‡∏£‡∏°</h3>
                    <div class="template-options" id="template-options">
                        <div class="loading">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏ü‡∏£‡∏°...</div>
                    </div>
                </div>

                <div class="admin-section">
                    <h3>üéØ ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç Frame Mapping</h3>
                    <div class="creator-controls">
                        <div class="frame-selection">
                            <label>‡πÄ‡∏ü‡∏£‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å:</label>
                            <span id="selected-frame-name">-</span>
                        </div>
                        
                        <div class="creator-actions">
                            <button class="btn" id="btn-import-frame">üì• ‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡πÄ‡∏ü‡∏£‡∏°‡πÉ‡∏´‡∏°‡πà</button>
                            <button class="btn" id="btn-load-frame-editor">üìã ‡πÇ‡∏´‡∏•‡∏î‡∏ï‡∏±‡∏ß‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
                            <button class="btn success" id="btn-save-frame-mapping">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å Mapping</button>
                            <button class="btn" id="btn-add-slot">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏° Slot</button>
                            <button class="btn danger" id="btn-delete-template">üóëÔ∏è ‡∏•‡∏ö Template</button>
                            <button class="btn danger" id="btn-reset-mapping">üîÑ ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï</button>
                        </div>
                    </div>
                    
                    <div class="frame-editor" id="frame-editor">
                        <div class="editor-workspace">
                            <div class="frame-preview" id="frame-preview">
                                <div class="preview-placeholder">
                                    <div class="preview-icon">üñºÔ∏è</div>
                                    <p>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏ü‡∏£‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç mapping</p>
                                </div>
                            </div>
                            
                            <div class="slots-config" id="slots-config">
                                <h4>‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Slots:</h4>
                                <div class="slots-list" id="slots-list">
                                    <!-- Slots configuration will be populated here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Admin Tab -->
            <div class="tab-panel" id="admin-panel">
                <div class="admin-section">
                    <h3>üìÅ ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå</h3>
                    <div class="form-group">
                        <label for="watch-path-input">‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏π:</label>
                        <input type="text" class="form-control" id="watch-path-input" placeholder="C:/Users/...">
                    </div>
                    <div class="form-group">
                        <button class="btn" id="btn-browse-folder">üìÅ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå</button>
                        <button class="btn" id="btn-today-folder">üìÖ ‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</button>
                        <button class="btn success" id="btn-save-path">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
                    </div>
                </div>

                <div class="admin-section">
                    <h3>üìã ‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå</h3>
                    <div class="path-history" id="path-history">
                        <div class="loading">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</div>
                    </div>
                </div>

                <div class="admin-section">
                    <h3>üóëÔ∏è ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</h3>
                    <div class="controls">
                        <button class="btn danger" id="btn-clear-all">üóëÔ∏è ‡∏•‡∏ö‡∏£‡∏π‡∏õ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
                        <button class="btn" id="btn-refresh-gallery">üîÑ ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡πÅ‡∏Å‡∏•‡πÄ‡∏•‡∏≠‡∏£‡∏µ‡πà</button>
                    </div>
                </div>

                <div class="admin-section">
                    <h3>üìä ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥</h3>
                    <div id="admin-stats">
                        <div class="loading">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification System -->
    <div class="notification" id="notification"></div>

    <!-- Hidden Canvas Container for PhotoBooth Generation -->
    <div id="print-canvas-container">
        <canvas id="print-canvas" style="display: none;"></canvas>
    </div>

    <!-- Frame Editor Modal - Full Screen -->
    <div id="frame-editor-modal" class="modal hidden" aria-hidden="true">
        <div class="modal-backdrop" data-close="true"></div>
        <div class="modal-dialog modal-fullscreen" role="dialog" aria-modal="true" aria-labelledby="frame-editor-title">
            <div class="modal-header">
                <div class="modal-header-left">
                    <h3 id="frame-editor-title" class="modal-title">üñºÔ∏è ‡∏ï‡∏±‡∏ß‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏ü‡∏£‡∏°</h3>
                    <p class="modal-instructions">üñ±Ô∏è ‡∏Ñ‡∏•‡∏¥‡∏Å Slot ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å ‚Üí ‡∏•‡∏≤‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏¢‡πâ‡∏≤‡∏¢ ‚Üí ‡∏•‡∏≤‡∏Å‡∏°‡∏∏‡∏°‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î</p>
                </div>
                <div class="modal-header-right">
                    <button class="btn" id="btn-toggle-draw">‚úèÔ∏è ‡∏ß‡∏≤‡∏î Slot</button>
                    <button class="btn success" id="btn-done-frame-modal">‚úÖ ‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô</button>
                    <button class="btn close" id="btn-close-frame-modal" aria-label="‡∏õ‡∏¥‡∏î">‚úñ</button>
                </div>
            </div>
            <div class="modal-body">
                <div class="editor-layout">
                    <div class="editor-canvas">
                        <div class="frame-preview" id="frame-preview-modal"></div>
                    </div>
                    <div class="editor-sidebar">
                        <div class="sidebar-section">
                            <h4>üìã ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£ Slots</h4>
                            <div id="modal-slots-list" class="slots-list-modal"></div>
                        </div>
                        <div class="sidebar-section">
                            <h4>üí° ‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ</h4>
                            <ul class="help-list">
                                <li>üé® <strong>‡∏ß‡∏≤‡∏î:</strong> ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "‡∏ß‡∏≤‡∏î Slot" ‡πÅ‡∏•‡πâ‡∏ß‡∏•‡∏≤‡∏Å‡∏ö‡∏ô‡∏£‡∏π‡∏õ</li>
                                <li>üëÜ <strong>‡πÄ‡∏•‡∏∑‡∏≠‡∏Å:</strong> ‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà Slot</li>
                                <li>‚úã <strong>‡∏¢‡πâ‡∏≤‡∏¢:</strong> ‡∏•‡∏≤‡∏Å Slot ‡∏ó‡∏µ‡πà‡πÄ‡∏•‡∏∑‡∏≠‡∏Å</li>
                                <li>‚ÜîÔ∏è <strong>‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î:</strong> ‡∏•‡∏≤‡∏Å‡∏à‡∏∏‡∏î‡∏°‡∏∏‡∏°‡∏´‡∏£‡∏∑‡∏≠‡∏Ç‡∏≠‡∏ö</li>
                                <li>üóëÔ∏è <strong>‡∏•‡∏ö:</strong> ‡∏Å‡∏î Delete ‡∏´‡∏£‡∏∑‡∏≠‡∏õ‡∏∏‡πà‡∏°‡∏•‡∏ö</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Load functional modules first -->
    <script src="func/ui-utils.js"></script>
    <script src="func/socket.js"></script>
    <script src="func/gallery.js"></script>
    <script src="func/photobooth-creator.js"></script>
    <script src="func/photo-actions.js"></script>
    <script src="func/admin.js"></script>
    <script src="func/frame-manager.js"></script>
    
    <!-- Load main app after modules -->
    <script src="app.js" onerror="console.error('‚ùå Failed to load app.js'); document.body.innerHTML+='<div style=&quot;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#f8d7da;color:#721c24;padding:20px;border-radius:8px;text-align:center;z-index:9999;&quot;><h3>‚ö†Ô∏è ‡πÑ‡∏ü‡∏•‡πå JavaScript ‡πÑ‡∏°‡πà‡πÇ‡∏´‡∏•‡∏î</h3><p>‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö (Ctrl+F5)</p></div>';"></script>
</body>
</html>